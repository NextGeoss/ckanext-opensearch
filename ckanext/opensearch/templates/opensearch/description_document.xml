<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
<os:OpenSearchDescription {{ namespaces|xmlattr(False)|escape }} esipdiscovery:version="1.2">
    <os:ShortName>{{ short_name }}</os:ShortName>
    <os:Description>{{ description }}</os:Description>
    <os:Tags>{{ tags }}</os:Tags>
    <os:SyndicationRight>{{ syndication }}</os:SyndicationRight>
    <os:Query role="example" os:totalResults="20"/>
    <os:Url type="application/opensearchdescription+xml" template="{{ self_url }}" rel="self"/>
    <os:Url pageOffset="1" type="application/atom+xml" rel="{{ search_rel }}" indexOffset="1" template="{{ search_url }}">
        {# We may have more than one parameter and each parameter may have attributes not shown here (name="name" value="value" minimum="" maximum="") #}
        {% for param in parameters %}
            {% if param.options or param.attrs.name == 'q' %}
                <param:Parameter {{ param.attrs|xmlattr(False)|escape }}>
                {# The free text query parameter ('q' by default) needs a search profile #}
                {% if param.attrs.name == 'q' %}
                    <atom:link title="This parameter follows CKAN's free text search syntax, which is based on Solr's query syntax." rel="profile" href="https://docs.ckan.org/en/latest/api/index.html#ckan.logic.action.get.package_search"/>
                {% endif %}
                {% if param.attrs.name == 'geom' %}
                    <atom:link href="http://www.opengis.net/wkt/POLYGON" rel="profile" title="This service accepts WKT Polygons"/>
                {% endif %}
                {# A parameter may have zero or more Options #}
                {% if param.options %}
                    {% for option in param.options %}
                        <param:Option {{ option|xmlattr(False)|escape }}/>
                    {% endfor %}
                {% endif %}
            </param:Parameter>
            {% else %}
            <param:Parameter {{ param.attrs|xmlattr(False)|escape }}/>
            {% endif %}
        {% endfor %}
    </os:Url>
    {# We may have more than one example and each example may have more than one parameter #}
    {% if examples %}
        {% for example in examples %}
        {% endfor %}
    {% endif %}
</os:OpenSearchDescription>
